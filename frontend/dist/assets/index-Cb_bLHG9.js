const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/feature-auth-CDQ90f2j.js","assets/react-vendor-CXQW5CXM.js","assets/vendor-C2xFHkO2.js","assets/map-vendor--2Gvwj5Q.js","assets/map-vendor-Dgihpmma.css","assets/shared-BOarZger.js","assets/feature-fields-2FR36cYB.js","assets/feature-yield-Cwk_lcbu.js","assets/chart-vendor-Ca9tAmf7.js","assets/http-vendor-DnTtldoj.js","assets/feature-health-B2G7FPyj.js","assets/feature-recommendations-BQdgcp4a.js","assets/feature-weather-Dl1M0woD.js","assets/feature-admin-wcBeiCH-.js","assets/feature-news-DyLA7HOc.js","assets/NotificationSettingsPage-D-bVinCr.js"])))=>i.map(i=>d[i]);
import{j as e,O as p,n as r,i as t,o as A,N as _,r as a,p as S,Q as R,q as C}from"./react-vendor-CXQW5CXM.js";import{_ as n}from"./feature-fields-2FR36cYB.js";import{P as u,C as D,o as T,p as I,B as N,q as z,e as F,u as V,N as W,t as M,v as l,T as B,U as q,x as H}from"./shared-BOarZger.js";import{u as P,R as j,a as U,A as Q}from"./feature-auth-CDQ90f2j.js";import{ak as K}from"./vendor-C2xFHkO2.js";import"./map-vendor--2Gvwj5Q.js";import"./feature-yield-Cwk_lcbu.js";import"./chart-vendor-Ca9tAmf7.js";import"./http-vendor-DnTtldoj.js";(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))c(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&c(h)}).observe(document,{childList:!0,subtree:!0});function x(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(i){if(i.ep)return;i.ep=!0;const o=x(i);fetch(i.href,o)}})();const Y=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 text-gray-900",children:e.jsx(u,{fullWidth:!0,className:"flex justify-center",children:e.jsx("div",{className:"w-full max-w-4xl",children:e.jsx(D,{className:"overflow-hidden",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2",children:[e.jsxs("aside",{className:"hidden md:flex flex-col justify-between bg-brand-blue text-white p-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-white/10 flex items-center justify-center font-semibold",children:"SC"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-semibold tracking-tight",children:"SkyCrop"}),e.jsx("span",{className:"text-xs text-white/80",children:"Map-first crop intelligence"})]})]}),e.jsx("h1",{className:"text-xl font-semibold mb-2",children:"Welcome to SkyCrop"}),e.jsx("p",{className:"text-sm text-white/90",children:"Monitor field health, weather, and recommendations in a single, map-first dashboard."})]}),e.jsx("p",{className:"mt-6 text-[11px] text-white/70",children:"UX placeholder copy. This panel can later show seasonal tips, system status, or onboarding."})]}),e.jsx("section",{className:"flex flex-col justify-center bg-white px-6 py-8 sm:px-8","aria-label":"Authentication",children:e.jsx(p,{})})]})})})})}),w=()=>{const s=T(),{hasRole:d}=P(),x="flex h-10 items-center rounded-md px-3 text-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 focus-visible:ring-offset-gray-50",c=({isActive:i})=>[x,i?"bg-gray-100 text-gray-900 font-semibold":"text-gray-700 hover:bg-gray-50"].join(" ");return e.jsx("div",{className:"min-h-[70vh] bg-gray-100 text-gray-900",children:e.jsxs(u,{fullWidth:!0,className:"flex gap-6 py-4",children:[e.jsxs("aside",{className:"hidden md:flex w-60 flex-col gap-2 border-r border-gray-100 pr-4 text-sm","aria-label":"Section navigation",children:[e.jsx("span",{className:"px-1 text-[11px] font-semibold uppercase tracking-wide text-gray-500",children:"Workspace"}),e.jsxs("nav",{className:"flex flex-col gap-1",children:[e.jsx(r,{to:"/dashboard",className:c,children:"Dashboard"}),e.jsx(r,{to:"/fields",className:c,children:"Fields"}),e.jsx(r,{to:"/weather",className:c,children:"Weather"}),e.jsx(r,{to:"/news",className:c,children:"News"}),d("admin")&&e.jsx(r,{to:"/admin",className:c,children:"Admin"})]}),e.jsx("span",{className:"mt-4 px-1 text-[11px] font-semibold uppercase tracking-wide text-gray-500",children:"Insights"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("button",{type:"button",className:"flex h-9 items-center rounded-md px-3 text-left text-xs text-gray-500 bg-gray-50/60 cursor-not-allowed","aria-disabled":"true",children:"Health (coming soon)"}),e.jsx("button",{type:"button",className:"flex h-9 items-center rounded-md px-3 text-left text-xs text-gray-500 bg-gray-50/60 cursor-not-allowed","aria-disabled":"true",children:"Recommendations (coming soon)"})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("div",{className:"mb-3",children:e.jsx(I,{items:s})}),e.jsxs("header",{className:"mb-4 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-gray-500",children:"Farmer workspace"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{variant:"secondary",size:"sm",children:"Add field"}),e.jsx(N,{variant:"primary",size:"sm",children:"New task"})]})]}),e.jsx("section",{"aria-label":"Dashboard content",className:"mt-2 grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-3",children:e.jsx(p,{})})]})]})})},G=()=>e.jsx("div",{className:"min-h-[70vh] bg-gray-100 text-gray-900",children:e.jsx(u,{fullWidth:!0,className:"py-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[minmax(0,2fr)_minmax(0,1fr)] gap-4 lg:gap-6 lg:min-h-[calc(100vh-4rem)]",children:[e.jsxs("section",{"aria-label":"Field map",className:"relative min-h-[320px] lg:min-h-[600px] rounded-lg overflow-hidden lg:sticky lg:top-0",children:[e.jsx(z,{showHealthOverlay:!0}),e.jsx("a",{href:"#field-details-panel",className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-[1001] inline-flex items-center rounded-md border border-white/20 bg-brand-blue shadow-lg px-4 py-2 text-sm font-medium text-white hover:bg-blue-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 lg:hidden",children:"ðŸ“‹ Show field details"})]}),e.jsx("aside",{id:"field-details-panel","aria-label":"Field details and actions",className:"flex flex-col gap-4 lg:max-h-[calc(100vh-6rem)] lg:overflow-y-auto bg-white rounded-lg p-4",children:e.jsx(p,{})})]})})}),X=()=>{const{user:s,logout:d,hasRole:x}=P(),[c,i]=t.useState(!1),[o,h]=t.useState(!1),{isOnline:g}=F(),{showToast:b}=V(),[y,v]=t.useState(!1);t.useEffect(()=>{if(!c)return;const f=O=>{O.key==="Escape"&&i(!1)};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[c]),t.useEffect(()=>{if(!g){v(!0);return}y&&(b({variant:"success",title:"Back online",description:"Your connection has been restored."}),v(!1))},[g,y,b]);const E=(s==null?void 0:s.role)==="admin"?"Admin":(s==null?void 0:s.role)==="farmer"?"Farmer":"Guest",L="inline-flex items-center px-3 py-2 text-sm rounded-md transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 focus-visible:ring-offset-white",m=({isActive:f})=>[L,f?"bg-gray-100 text-gray-900 font-semibold":"text-gray-700 hover:bg-gray-50"].join(" ");return e.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-100 text-gray-900",children:[e.jsx("header",{role:"banner",className:"border-b border-gray-100 bg-white shadow-sm",children:e.jsxs(u,{className:"py-3 sm:py-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:e.jsxs(r,{to:"/dashboard",className:"flex items-center gap-2 focus-visible:outline-none",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-primary text-white flex items-center justify-center text-xs font-semibold",children:"SC"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-semibold tracking-tight",children:"SkyCrop"}),e.jsx("span",{className:"text-[11px] text-gray-500",children:"Paddy intelligence for Sri Lanka"})]})]})}),e.jsxs("nav",{"aria-label":"Primary",className:"hidden md:flex items-center gap-1 lg:gap-2 text-sm text-gray-700 flex-1 justify-center",children:[e.jsx(r,{to:"/dashboard",className:m,children:"Dashboard"}),e.jsx(r,{to:"/fields",className:m,children:"Fields"}),e.jsx(r,{to:"/weather",className:m,children:"Weather"}),e.jsx(r,{to:"/news",className:m,children:"News"}),x("admin")&&e.jsx(r,{to:"/admin",className:m,children:"Admin"})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s&&e.jsxs("div",{className:"relative",children:[e.jsx(W,{onClick:()=>h(!o),isOpen:o}),e.jsx(M,{isOpen:o,onClose:()=>h(!1)})]}),e.jsxs("div",{className:"hidden sm:flex flex-col items-end text-[11px] text-gray-500",children:[e.jsx("span",{className:"sr-only",children:"Current user role"}),e.jsx("span",{className:"font-medium text-gray-900",children:E}),s&&e.jsx("span",{className:"text-gray-500",children:"Signed in"})]}),s&&e.jsx("button",{type:"button",onClick:()=>{i(!1),d()},className:"hidden sm:inline-flex items-center rounded-md border border-gray-200 bg-white px-3 py-1.5 text-xs font-medium text-gray-700 hover:bg-gray-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 focus-visible:ring-offset-white",children:"Sign out"}),e.jsxs("button",{type:"button",className:"inline-flex items-center justify-center rounded-md p-2 text-gray-700 hover:bg-gray-100 md:hidden focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 focus-visible:ring-offset-white","aria-label":"Toggle navigation menu","aria-expanded":c,"aria-controls":"primary-navigation-mobile",onClick:()=>i(f=>!f),children:[e.jsx("span",{className:"sr-only",children:"Toggle navigation"}),e.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:c?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]})]})]}),e.jsxs("nav",{id:"primary-navigation-mobile","aria-label":"Primary",className:`md:hidden mt-2 space-y-1 ${c?"block":"hidden"}`,children:[e.jsx(r,{to:"/dashboard",className:m,onClick:()=>i(!1),children:"Dashboard"}),e.jsx(r,{to:"/fields",className:m,onClick:()=>i(!1),children:"Fields"}),e.jsx(r,{to:"/weather",className:m,onClick:()=>i(!1),children:"Weather"}),e.jsx(r,{to:"/news",className:m,onClick:()=>i(!1),children:"News"}),x("admin")&&e.jsx(r,{to:"/admin",className:m,onClick:()=>i(!1),children:"Admin"}),s&&e.jsx("button",{type:"button",onClick:()=>{i(!1),d()},className:"mt-1 inline-flex w-full items-center justify-center rounded-md border border-gray-200 bg-white px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 focus-visible:ring-offset-white",children:"Sign out"})]})]})}),!g&&e.jsx("div",{className:"bg-amber-50 border-b border-amber-200",children:e.jsx(u,{className:"py-2",children:e.jsxs("p",{className:"flex items-center gap-2 text-xs text-amber-800",role:"status","aria-live":"polite",children:[e.jsx("span",{className:"h-2 w-2 rounded-full bg-amber-500 animate-pulse","aria-hidden":"true"}),"you're offline. Data may be outdated. Changes will sync when you're back online."]})})}),e.jsx("main",{id:"main-content",role:"main",className:"flex-1 bg-gray-100",children:e.jsx(u,{fullWidth:!0,className:"h-full",children:e.jsx(p,{})})})]})},$=t.lazy(()=>n(()=>import("./feature-auth-CDQ90f2j.js").then(s=>s.L),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),J=t.lazy(()=>n(()=>import("./feature-auth-CDQ90f2j.js").then(s=>s.b),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),Z=t.lazy(()=>n(()=>import("./feature-auth-CDQ90f2j.js").then(s=>s.c),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),ee=t.lazy(()=>n(()=>import("./feature-auth-CDQ90f2j.js").then(s=>s.O),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),se=t.lazy(()=>n(()=>import("./feature-fields-2FR36cYB.js").then(s=>s.D),__vite__mapDeps([6,5,1,2,3,4,9,7,8]))),te=t.lazy(()=>n(()=>import("./feature-fields-2FR36cYB.js").then(s=>s.F),__vite__mapDeps([6,5,1,2,3,4,9,7,8]))),ie=t.lazy(()=>n(()=>import("./feature-fields-2FR36cYB.js").then(s=>s.a),__vite__mapDeps([6,5,1,2,3,4,9,7,8]))),ae=t.lazy(()=>n(()=>import("./feature-fields-2FR36cYB.js").then(s=>s.C),__vite__mapDeps([6,5,1,2,3,4,9,7,8]))),le=t.lazy(()=>n(()=>import("./feature-fields-2FR36cYB.js").then(s=>s.b),__vite__mapDeps([6,5,1,2,3,4,9,7,8]))),ne=t.lazy(()=>n(()=>import("./feature-fields-2FR36cYB.js").then(s=>s.E),__vite__mapDeps([6,5,1,2,3,4,9,7,8]))),re=t.lazy(()=>n(()=>import("./feature-health-B2G7FPyj.js").then(s=>s.F),__vite__mapDeps([10,5,1,2,3,4,6,7,8,9]))),oe=t.lazy(()=>n(()=>import("./feature-recommendations-BQdgcp4a.js"),__vite__mapDeps([11,5,1,2,3,4,6,7,8,9,10,12]))),ce=t.lazy(()=>n(()=>import("./feature-weather-Dl1M0woD.js").then(s=>s.F),__vite__mapDeps([12,5,1,2,3,4,6,7,8,9]))),de=t.lazy(()=>n(()=>import("./feature-yield-Cwk_lcbu.js").then(s=>s.F),__vite__mapDeps([7,5,1,2,3,4,6,9,8]))),me=t.lazy(()=>n(()=>import("./feature-weather-Dl1M0woD.js").then(s=>s.W),__vite__mapDeps([12,5,1,2,3,4,6,7,8,9]))),xe=t.lazy(()=>n(()=>import("./feature-admin-wcBeiCH-.js").then(s=>s.A),__vite__mapDeps([13,1,2,3,4,5,6,7,8,9]))),he=t.lazy(()=>n(()=>import("./feature-admin-wcBeiCH-.js").then(s=>s.a),__vite__mapDeps([13,1,2,3,4,5,6,7,8,9]))),fe=t.lazy(()=>n(()=>import("./feature-admin-wcBeiCH-.js").then(s=>s.b),__vite__mapDeps([13,1,2,3,4,5,6,7,8,9]))),ue=t.lazy(()=>n(()=>import("./feature-admin-wcBeiCH-.js").then(s=>s.c),__vite__mapDeps([13,1,2,3,4,5,6,7,8,9]))),pe=t.lazy(()=>n(()=>import("./feature-news-DyLA7HOc.js").then(s=>s.N),__vite__mapDeps([14,1,2,3,4,5,6,7,8,9]))),ge=t.lazy(()=>n(()=>import("./feature-news-DyLA7HOc.js").then(s=>s.A),__vite__mapDeps([14,1,2,3,4,5,6,7,8,9]))),je=t.lazy(()=>n(()=>import("./NotificationSettingsPage-D-bVinCr.js"),__vite__mapDeps([15,1,2,3,4,5,6,7,8,9]))),be=A([{path:"/",element:e.jsx(X,{}),children:[{index:!0,element:e.jsx(_,{to:"/dashboard",replace:!0})},{path:"auth",element:e.jsx(Y,{}),children:[{path:"login",element:e.jsx(a.Suspense,{fallback:e.jsx(l,{}),children:e.jsx($,{})})},{path:"register",element:e.jsx(a.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(J,{})})},{path:"reset-password",element:e.jsx(a.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(Z,{})})},{path:"callback",element:e.jsx(a.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(ee,{})})}]},{element:e.jsx(j,{children:e.jsx(w,{})}),children:[{path:"dashboard",element:e.jsx(a.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(se,{})})},{path:"fields",element:e.jsx(a.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(te,{})})},{path:"fields/create",element:e.jsx(a.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(ae,{})})},{path:"fields/create-with-map",element:e.jsx(a.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(le,{})})},{path:"fields/:fieldId",element:e.jsx(a.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(ie,{})})},{path:"weather",element:e.jsx(a.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(me,{})})},{path:"news",element:e.jsx(a.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(pe,{})})},{path:"news/:id",element:e.jsx(a.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(ge,{})})},{path:"settings/notifications",element:e.jsx(a.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(je,{})})}]},{element:e.jsx(j,{children:e.jsx(G,{})}),children:[{path:"fields/:fieldId/health",element:e.jsx(a.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(re,{})})},{path:"fields/:fieldId/recommendations",element:e.jsx(a.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(oe,{})})},{path:"fields/:fieldId/weather",element:e.jsx(a.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(ce,{})})},{path:"fields/:fieldId/yield",element:e.jsx(a.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(de,{})})},{path:"fields/:fieldId/edit-boundary",element:e.jsx(a.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(ne,{})})}]},{element:e.jsx(j,{children:e.jsx(U,{requiredRole:"admin",children:e.jsx(w,{})})}),children:[{path:"admin",element:e.jsx(a.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(xe,{})})},{path:"admin/users",element:e.jsx(a.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(he,{})})},{path:"admin/content",element:e.jsx(a.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(fe,{})})},{path:"admin/system-health",element:e.jsx(a.Suspense,{fallback:e.jsx(l,{}),children:e.jsx(ue,{})})}]}]},{path:"*",element:e.jsx(_,{to:"/dashboard",replace:!0})}]),ye=()=>e.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-100 text-gray-900",children:[e.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 focus:z-50 bg-brand-blue text-white px-4 py-2 rounded",children:"Skip to main content"}),e.jsx(S,{router:be})]}),ve=new K({defaultOptions:{queries:{staleTime:5*60*1e3,gcTime:10*60*1e3}}}),_e=t.createContext(void 0),Ne=({children:s})=>{const d=a.useMemo(()=>({mode:"light"}),[]);return e.jsx(_e.Provider,{value:d,children:s})},we=({children:s})=>e.jsx(R,{client:ve,children:e.jsx(Ne,{children:e.jsx(B,{children:e.jsx(Q,{children:e.jsx(q,{children:e.jsx(H,{children:s})})})})})}),k=document.getElementById("root");if(!k)throw new Error('Root element with id "root" not found');const Pe=C.createRoot(k);Pe.render(e.jsx(t.StrictMode,{children:e.jsx(we,{children:e.jsx(ye,{})})}));
